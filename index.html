<!doctype html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8" />
    <title>The Badlands - A myFi Project</title>
    <!-- <preference name="Orientation" value="landscape" /> -->
    <script src="//cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.js"></script>
    <script type="text/javascript" src="Title.js"></script>
    <script type="text/javascript" src="Tutorial.js"></script>
    <script type="text/javascript" src="Badlands.js"></script>
    <script type="text/javascript" src="game.js"></script>
    <style type="text/css">
        body {
            margin: 0;
            
        }
    </style>
</head>
<body>

<script type="text/javascript">

    

    // var ratio = Math.max((window.innerWidth * window.devicePixelRatio)/ (window.innerHeight * window.devicePixelRatio), (window.innerHeight * window.devicePixelRatio) / (window.innerWidth * window.devicePixelRatio)) 
    // var DEFAULT_HEIGHT = 272 //window.innerHeight * window.devicePixelRatio // 272
    // var DEFAULT_WIDTH =  592 //ratio * DEFAULT_HEIGHT// * 2


    // var config = {
    //     type: Phaser.AUTO,
    //     pixelArt: 0,
    //     scale: {

    //         parent: 'mygame',
    //         mode: Phaser.Scale.FIT,
    //         autoCenter: Phaser.Scale.CENTER_BOTH,
    //         width:  DEFAULT_WIDTH, //592, //window.innerWidth * window.devicePixelRatio
    //         height: DEFAULT_HEIGHT //272, //window.innerHeight * window.devicePixelRatio
    //         //resolution: window.devicePixelRatio || 1
    //     },
    //     input: {
    //         keyboard: true,
    //         gamepad: true
    //     },
    //     physics:{
    //         default:'arcade',
    //         arcade:{
    //             gravity:{x: 0, y:600},
    //             debug: 0,
    //             overlapBias: 20
    //         }
    //     },
    //     fps: {
    //         forceSetTimeOut: true,
    //         // panicMax: 0,
    //         // smoothStep: false,
    //         target: 60
    //     },
    //     scene: {
    //         preload: preload,
    //         create: create,
    //         update: update
    //     },
        
    // };




//     function preload ()
//     {   
//         var progress = this.add.graphics();

//     this.load.on('progress', function (value) {

//         progress.clear();
//         progress.fillStyle(0xffffff, 1);
//         progress.fillRect(0, 270, 800 * value, 60);

//     });

//     this.load.on('complete', function () {

//         progress.destroy();

//     });

//         // Music
//         bgMusicArray = []
        
        
            
//             this.load.audio("bgMusic0a", ["assets/music/Riptide.mp3"]);
//             this.load.audio("bgMusic0b", ["assets/music/Smile.mp3"]);
//             this.load.audio("bgMusic0c", ["assets/music/Gumshield.mp3"]);
//             this.load.audio("bgMusic0d", ["assets/music/Throw_Me_To_The_Wolves.mp3"]);

//             Phaser.Utils.Array.Add(bgMusicArray,["bgMusic0a","bgMusic0b","bgMusic0c","bgMusic0d"])
            
//             this.load.audio("bgMusic1", ["assets/music/The_Apartment.mp3"]);
//             this.load.audio("bgMusic2", ["assets/music/Le_chÃ¢teau_magique.mp3"]);
//             this.load.audio("bgMusic3", ["assets/music/Kids_See_Ghosts.mp3"]);
//             this.load.audio("bgMusic4", ["assets/music/Katana.mp3"]);
//             this.load.audio("bgMusic5", ["assets/music/Ludum_Dare_38_Track_2.wav"]);
//             this.load.audio("bgMusic6", ["assets/music/Night_(Instrumental).mp3"]);
//             this.load.audio("bgMusic7", ["assets/music/Tripwire.mp3"]);

//             songDatabaseSize = 7
            
            

//         this.load.audio("playerSwordSwing", ["assets/sFX/SFX_Whoosh_Sword_02.mp3"]);
//         this.load.audio("playerHeavySwordSwing", ["assets/sFX/SFX_Whoosh_Sword_03.mp3"]);        
//         this.load.audio("enemySwordSwing", ["assets/sFX/SFX_Sword_Whoosh_01.mp3"]);
//         this.load.audio("charge", ["assets/sFX/SFX_Potion_01.mp3"]);
        
//         this.load.image('playerIconBox', 'assets/vFX/playerHUDBox.png');
//         this.load.image('playerIcon', 'assets/icons/playerIcon1.png');
        

//         this.load.image('storingBuffIcon', 'assets/ach_00059.png');
//         this.load.image('spendingBuffIcon', 'assets/ach_00046.png');
//         this.load.image('growingBuffIcon', 'assets/ach_00057.png');

//         this.load.image('t1BuffIcon', 'assets/ach_00117.png');
//         this.load.image('t2BuffIcon', 'assets/ach_00118.png');
//         this.load.image('t3BuffIcon', 'assets/ach_00119.png');
//         this.load.image('t4BuffIcon', 'assets/ach_00120.png');
//         this.load.image('t5BuffIcon', 'assets/ach_00121.png');

//         this.load.image('t1KianovaBuffIcon', 'assets/ach_00122.png');
//         this.load.image('t2KianovaBuffIcon', 'assets/ach_00091.png');

//         this.load.image('levelIcon', 'assets/ach_00006.png');
//         this.load.image('gloryIcon', 'assets/ach_00035.png');
//         this.load.image('goldIcon', 'assets/ach_00040.png');

//         this.load.image('up', 'assets/controls/shadedDark03.png');
//         this.load.image('down', 'assets/controls/shadedDark10.png');
//         this.load.image('deadSpace', 'assets/controls/buttonDeadSpace.png');
//         this.load.image('left', 'assets/controls/shadedDark05.png');
//         this.load.image('right', 'assets/controls/shadedDark06.png');
//         this.load.image('defaultAction', 'assets/controls/ach_00022.png');
//         this.load.image('charge', 'assets/controls/ach_00005.png');
        
//         // Battle Mode

//         // Menus & Icons
        
//         this.load.image('inspirationBox', 'assets/vFX/inspirationBox.png');
//         this.load.image('playerVitalsBox', 'assets/vFX/playerHUDBox.png');

//         this.load.image('dawnl1', 'assets/dawn1.png');
//         this.load.image('dawnl2', 'assets/dawn2.png');
//         this.load.image('dawnl3', 'assets/dawn3.png');
//         this.load.image('dawnl4', 'assets/dawn4.png');
//         this.load.image('dawnl5', 'assets/dawn5.png');
//         this.load.image('dawnl6', 'assets/dawn6.png');
//         this.load.image('dawnl7', 'assets/dawn7.png');
//         this.load.image('dawnl8', 'assets/dawn8.png');

//         this.load.image('woodsl1', 'assets/woods1.png');
//         this.load.image('woodsl2', 'assets/woods2.png');
//         this.load.image('woodsl3', 'assets/woods3.png');
//         this.load.image('woodsl4', 'assets/woods4.png');

//         this.load.image('vines', 'assets/vines.png');
//         this.load.image('treeTrunk', 'assets/treeTrunk.png');

//         this.load.image('ground', 'assets/woodground.png');

//         this.load.atlas('heroF', 'assets/heroF.png','assets/heroF.json');
//         this.load.atlas('heroM', 'assets/heroM.png','assets/heroM.json');

        


//         // General 

//         this.load.spritesheet('playerLockOnIcon', 'assets/playerLockOnIcon.png', { frameWidth: 100, frameHeight: 100});
//         // Enemies

//         this.load.atlas('doomsayer', 'assets/doomsayer.png','assets/doomsayersprites.json');
//         this.load.spritesheet('nightBorne', 'assets/nightBorne.png', { frameWidth: 80, frameHeight: 80});
//         this.load.spritesheet('nightBorneNecromancer', 'assets/nightBorneNecromancer.png', { frameWidth: 160, frameHeight: 128});

//         this.load.spritesheet('energyStance', 'assets/energyStance.png', { frameWidth: 96, frameHeight: 192});
//         this.load.spritesheet('focusStance', 'assets/focusStance.png', { frameWidth: 96, frameHeight: 192});
//         this.load.spritesheet('chargeEnergy', 'assets/chargeEnergy.png', { frameWidth: 100, frameHeight: 100});
//         this.load.spritesheet('chargeDash', 'assets/chargeDash.png', { frameWidth: 128, frameHeight: 128});
//         // VFX - Hit Animation
//         this.load.spritesheet('whiteHitSmear', 'assets/whiteHitSmear.png', { frameWidth: 1048, frameHeight: 1048});
//         this.load.spritesheet('whiteHitSmear2', 'assets/whiteHitSmear2.png', { frameWidth: 1048, frameHeight: 1048});  

//         // Skills
//         this.load.spritesheet('explosiveStrikeIcon', 'assets/skills/explosiveStrikeIcon.png', { frameWidth: 256, frameHeight: 256});
//         this.load.spritesheet('explosiveStrike', 'assets/skills/explosiveStrike.png', { frameWidth: 48, frameHeight: 48}); 
        

//         this.load.spritesheet('thunderStrikeIcon', 'assets/skills/thunderStrikeIcon.png', { frameWidth: 256, frameHeight: 256});
//         this.load.spritesheet('thunderStrike', 'assets/skills/thunderStrike.png', { frameWidth: 64, frameHeight: 64}); 
//         this.load.spritesheet('thunderStrikeSmear', 'assets/skills/thunderStrikeSmear.png', { frameWidth: 1048, frameHeight: 1048});

//         this.load.spritesheet('deadlyCombatAssaultIcon', 'assets/skills/deadlyCombatAssaultIcon.png', { frameWidth: 256, frameHeight: 256});
//         this.load.spritesheet('deadlyCombatAssaultSmear', 'assets/skills/deadlyCombatAssaultSmear.png', { frameWidth: 1048, frameHeight: 1048});

//         this.load.spritesheet('eagleStrikeIcon', 'assets/skills/eagleStrikeIcon.png', { frameWidth: 256, frameHeight: 256});

//         this.load.spritesheet('coveringFireIcon', 'assets/skills/coveringFireIcon.png', { frameWidth: 256, frameHeight: 256});

//     }

    








//     function update ()
//     {
       
//         // Debugging and Testing Controls

//             // Console

//             closest = this.physics.closest(player,enemies.getChildren()) 

          
//             //console.log("Progress:" + progress)
//             //console.log("Progress to Next CheckPoint:" + progressToNextCheckPoint)
            

//             // console.log("Controls Active:" + controlsEnabled)

//         //     console.log("Player Hit:" + playerIsHit)
            
//         //    console.log("Left Key:" + leftIsDown)
//         //     console.log("Right Key:" + rightIsDown)
//         //     console.log("ActionKeyA:" + actionKeyAIsDown)
//         //    console.log("ActionKeyB:" + actionKeyBIsDown)
//         //     console.log("SkillKeyA:" + skillKeyAIsDown)
//         //     console.log("SkillKeyB:" + skillKeyBIsDown)
//         //     console.log("Player Dodging:" + playerDodging)
//         //     console.log("Player Attacking:" + playerAttacking)
//         //     console.log("Player Blocking:" + playerBlocking)
//         //     console.log("Player Jumping:" + playerJumping)
//         //     console.log("Player Crouching:" + playerCrouching)
//         //     console.log("Using Power:" + usingPower)

//             // console.log("nightBorneCam:" + nightBorneCamActive)
//             // console.log("nightBorneCamLocked:" + nightBorneCamLocked)
//             //console.log("NightBorne X Pos:" + nightBorne.x)
//             console.log("Player Y Pos:" + player.y)


            
//         // General / Universal

//             // UI 

//                 playerIconBox.x = camera.scrollX + (width * 0.04)
//                 playerIconBox.y = camera.scrollY + (height * 0.075)

//                 playerIcon.x = playerIconBox.x
//                 playerIcon.y = playerIconBox.y

//                 playerVitals.x = playerIconBox.x + 25
//                 playerVitals.y = playerIconBox.y - 12.5
//                 playerVitals.draw()

//                 levelIcon.x = camera.scrollX + (width * 0.75)
//                 levelIcon.y = playerIcon.y + 15
//                 levelText.x = levelIcon.x + 30
//                 levelText.y = levelIcon.y
//                 levelText.setText(Math.floor(level))

//                 playerVitalsBox.x = playerVitals.x - 4
//                 playerVitalsBox.y = playerIcon.y

//                 gloryIcon.x = camera.scrollX + (width * 0.865)
//                 gloryIcon.y = levelIcon.y - 15
//                 gloryText.x = gloryIcon.x + 47.5
//                 gloryText.y = gloryIcon.y
//                 gloryText.setText(Math.floor(glory))

//                 goldIcon.x = gloryIcon.x
//                 goldIcon.y = levelIcon.y + 15
//                 goldText.x = gloryText.x
//                 goldText.y = goldIcon.y
//                 goldText.setText(Math.floor(gold))

//                 levelProgress.x = camera.scrollX + width * 0.25
//                 levelProgress.y = camera.scrollY + (height * 0.9)
//                 levelProgress.draw()

//                 skillABox.x = playerVitalsBox.x + 150
//                 skillABox.y = playerVitalsBox.y + 32.5

//                 skillAIcon.x = skillABox.x
//                 skillAIcon.y = skillABox.y

//                 skillBBox.x = skillABox.x + 40
//                 skillBBox.y = skillABox.y

//                 skillBIcon.x = skillBBox.x
//                 skillBIcon.y = skillBBox.y

//                 inspirationPlayerIconBox.x = camera.scrollX + (width * 0.075)


//                 inspirationPlayerIcon.x = inspirationPlayerIconBox.x


//                 inspirationTextBox.x = camera.scrollX + (width * 0.5)
//                 inspirationText.x = inspirationTextBox.x

//                 inspirationBoxEnergy.x = camera.scrollX + (width * 0.25)
//                 inspirationTextEnergy.x = inspirationBoxEnergy.x
//                 inspirationBoxFocus.x = camera.scrollX + (width * 0.5)
//                 inspirationTextFocus.x = inspirationBoxFocus.x
//                 inspirationBoxPower.x = camera.scrollX + (width * 0.75)
//                 inspirationTextPower.x = inspirationBoxPower.x
            
//                 skillTreeEnergyIcon.x = inspirationBoxEnergy.x
//                 skillTreeFocusIcon.x = inspirationBoxFocus.x
//                 skillTreeLifeIcon.x = inspirationBoxPower.x


//             // Audio

//                 // Background Music

//                 bgMusic.once('complete', function(){
//                     songChoice = Math.floor(Phaser.Math.Between(1,songDatabaseSize))
//                     Phaser.Utils.Array.Add(bgMusicArray,"bgMusic" + songChoice)
//                     bgMusic.destroy()
//                     bgMusic = this.sound.add(Phaser.Utils.Array.GetRandom(bgMusicArray))
//                     bgMusic.play()
//                 },this)  

  



//            // NightBorne
           
//                // NightBorne Elite

               

//                     // NightBorne outline follows NightBorne
//                         nightBorneOutline.x = nightBorne.x - 2.5
//                         nightBorneOutline.y = nightBorne.y - 135

//                     // NightBorne outline copies current playing animation of necromancer sprite, with optional delay
//                         nightBorneOutline.play({key:nightBorne.anims.getName(),frameRate:Phaser.Math.Between(8,16)},true) 

//                     // Necromancer

//                     // Necromancer outline follows necromancer
                    
//                         nightBorneNecromancerOutline.x = nightBorneNecromancer.x - 2.5
//                         nightBorneNecromancerOutline.y = nightBorneNecromancer.y - 10

//                     // Necormancer outline copies current playing animation of necromancer sprite, with optional delay
//                         nightBorneNecromancerOutline.play({key:nightBorneNecromancer.anims.getName(),frameRate:Phaser.Math.Between(8,16)},true)

//         // Travel Mode
//         if (gameMode == 0){

//             // Game Variables

//             if(!focusModeActive){
//                 playerSpeed = player.x / (width * 1.25)
//             } else {
//                 playerSpeed = 0.5
//             }

//             // To be sorted

//             if (progress >= progressToNextLevel){
//             glory += ((100 / 60) * 100) * (playerSpeed)
//             levelUp()

//             }

//             if (progress >= progressToNextCheckPoint){
//                 player.flipX = false
//                 nightBorneCam()
//                 if(nightBorneCamLocked){
//                     enemyChase(0.3)
//                 }
                
//             }

//             nightBorneVFX.setVisible(0)

            


//                 nightBorneNecromancer.play({key:'nightBorneNecromancer_Idle',frameRate: 8 * playerSpeed},true)
//                 nightBorne.play({key:'nightBorne_Move',frameRate: 8 * playerSpeed},true)

                

            

//             // Background 

//                 // Parallax Background layers scrolls at variable speed multiplied by playerSpeed %
//                 if(!gameOver){
//                     if(!nightBorneCamActive || nightBorneCamLocked){
                    
//                     woodsl2.tilePositionX += 1.5 * (playerSpeed)
//                     woodsl3.tilePositionX += 3 * (playerSpeed)
//                     woodsl4.tilePositionX += 4.5 * (playerSpeed)
//                     moveHighObstacle(highObstacle, 4 * (playerSpeed))
//                     moveLowObstacle(lowObstacle, 4.5 * (playerSpeed))

//                         if(creep.anims.getName() == 'nightBorneMinion_Move'){
//                             moveCreep(creep, 6 * (playerSpeed))
//                         } else if (creep.anims.getName() == 'nightBorneMinion_Idle') {
//                             moveCreep(creep, 3 * (playerSpeed))
//                         } else {
//                             moveCreep(creep, 4 * (playerSpeed))
//                         }
//                     } else if(nightBorneCamActive && !nightBorneCamLocked) {
//                         // woodsl2.tilePositionX += 1.5 * (playerSpeed)
//                         // woodsl3.tilePositionX += 3 * (playerSpeed)
//                         // woodsl4.tilePositionX += 4.5 * (playerSpeed)

//                         moveHighObstacle(highObstacle, 2 * (playerSpeed))
//                         moveLowObstacle(lowObstacle, 2.25 * (playerSpeed))

//                         if(creep.anims.getName() == 'nightBorneMinion_Move'){
//                             moveCreep(creep, 3 * (playerSpeed))
//                         } else if (creep.anims.getName() == 'nightBorneMinion_Idle') {
//                             moveCreep(creep, 1.5 * (playerSpeed))
//                         } else {
//                             moveCreep(creep, 2 * (playerSpeed))
//                         }
//                     }
//                 } 
//             // Player
            
//             player.setDragX(400)

//             // NightBorne

//                 // Dynamic Panning based on nightBorne distance to player
//                 if (!nightBorneCamActive){
                    
//                         camera.pan(width * 1.5,0,2000) 
                    
//                 } else if (nightBorneCamActive && !controlsEnabled) {
//                     player.play({key:'pRun',frameRate: 16},true);
//                 }

//                 // NightBorne Elite

//                 // Necromancer

//                     //  Necromancer follows behind NightBorne Elite at constant distance

//                     nightBorneNecromancer.x = nightBorne.x - 55
//                     nightBorneNecromancer.y = nightBorne.y - 175



//         // Battle Mode

//         } else if (gameMode == 1){

//                 // Camera
//                 if (player.x > closest.x - 150 && playerLockedOn){
                    
//                     camera.pan(player.x - 100,0,100,'Sine.easeInOut',true,
//                     (camera, progress) => { 
//                         camera.panEffect.destination.x = player.x - 100;
//                         if(progress == 1){
//                            camera.startFollow(player,true,0.5,0.5,100,0)
//                        }
//                     })
                    
//                 } else 

//                 if (player.x < closest.x + 150 && playerLockedOn){
                    
//                     camera.pan(player.x + 100,0,100,'Sine.easeInOut', true,
//                     (camera, progress) => { 
//                         camera.panEffect.destination.x = player.x + 100;
//                         if(progress == 1){
//                            camera.startFollow(player,true,0.5,0.5,-100,0)
//                        }
//                     })
                    
//                 } else if (!playerLockedOn) {
//                     camera.pan(player.x + 100,0,100,'Sine.easeInOut',true,
//                     (camera, progress) => { 
//                          camera.panEffect.destination.x = player.x;
//                          if(progress == 1){
//                             camera.startFollow(player,true,0.5,0.5)
//                         }
//                     })
//                 }

                


//                 // Auto lock - Enables Player to automatically face closest enemy
//                 if(Math.abs(player.x - closest.x) <= 300){
//                     playerLockedOn = true
//                     if(player.x < closest.x){
//                         player.flipX = false
                        
//                     } else {
//                         player.flipX = true
                        
//                     }
//                 } else {
//                     playerLockedOn = false
//                 }

//                 // Enables closest enemy to automatically face and move towards player
//                 if(Math.abs(closest.x - player.x) <= 200){
//                     enemyLockedOn = true
//                     if(closest.x < player.x){
//                         closest.flipX = false
//                     } else {
//                         closest.flipX = true
//                     }
//                 } else {
//                     enemyLockedOn = false
//                 }

//                 // Drag Settings
                
//                 // Set player drag based on if in air or on ground

//                 if (player.body.onFloor()){
//                     player.setDragX(750)
//                 } else {
//                     player.setDragX(300)
//                 }


//                 // NightBorne

//                 // INTEGRATE WITH NIGHTBORNEHIT FUNCTION
//                     // Enemy detects collision with player sword

//                     if (nightBorneIsHit){
//                         nightBorne.play({key:'nightBorne_Hurt',frameRate: 12},true); 
//                         nightBorne.once('animationstart', function(){
//                             if (player.flipX){
//                                 nightBorne.setVelocity(-Phaser.Math.Between(50,150),-Phaser.Math.Between(50,200))
                                
                                
//                             } else {
//                                 nightBorne.setVelocity(Phaser.Math.Between(50,150),-Phaser.Math.Between(50,200))
//                             }
//                             // if(nightBorne.body.onFloor()){
//                             //     nightBorne.setVelocityY(-Phaser.Math.Between(50,200))
//                             // }
//                         }, nightBorne)
//                         nightBorne.once('animationcomplete', function () {
                                
//                             nightBorneRecover();
                                
                                
//                             }, this);
//                     }

//                     // INTEGRATE WITH NIGHTBORNEHIT FUNCTION
//                     // Check for enemy death

//                     if (nightBorneLife <= 0 && !nightBorneIsHit){
//                         nightBorne.anims.play({key:'nightBorne_Death',frameRate: 23},true);
              
//                         nightBorne.once('animationcomplete', function (anim,frame) {

//                                         nightBorne.setDragX(0)
//                                         nightBorneNecromancer.setDragX(0)
//                                         nightBorne.setVelocityX(0)
//                                         nightBorneNecromancer.setVelocityX(0)
//                                         nightBorne.flipX = false
//                                         nightBorne.x = 0
//                                         nightBorne.y = 0
//                                         nightBorneMaxLife = Phaser.Math.Between(income * 0.8, (income * 0.8) * chaosFactor) 
//                                         nightBorneLife = nightBorneMaxLife
//                                         nightBorneVitals.p = 38 / nightBorneMaxLife
                                        
//                                         modeSwitch(0)
                                        
//                         }, nightBorne)
//                     }

                    
            
            

            
//         }


//         //  // Move to "Start NightBorne Battle" function
//         // if (inBattle){
           
//         //     if(startNecroFloat){
//         //         startNecroFloat = false
//         //     this.tweens.add({
//         //                             targets     : [nightBorneNecromancer],
//         //                             x       : nightBorne.x - 75, 
//         //                             ease        : 'Quad.easeIn',
//         //                             duration    : 12000,
//         //                             yoyo        : 1,
//         //                             repeat      : -1
//         //     });
//         //     this.tweens.add({
//         //                             targets     : [nightBorneNecromancer],
//         //                             y       : nightBorne.y - 230, 
//         //                             ease        : 'Power2',
//         //                             duration    : 7500,
//         //                             yoyo        : 1,
//         //                             repeat      : -1
                                    
//         //     });
//         // }

//         // } 


//         // // REPLACE WITH CASE: FORMAT FOR CLEANER CODE, ADD ALL TO BATTLE MODE SECTION ONLY AND PLAYER ONLY VERSION TO RUNNING MODE
        
        
//         // Enable player sword collision detection
//         if (player.anims.getName() == 'pDoubleAttack'){
//                     playerSwordSwing.play()
                    
                    

//                     if (player.anims.currentFrame.index >= 6 && player.anims.currentFrame.index < 12){
                        
//                         sword.body.checkCollision.none = false
//                         damage = 0.05 * maxEnergy *  baseDamageMultiplier
//                     } else {
//                         sword.body.checkCollision.none = true
//                     }

//         } if (player.anims.getName() == 'pAttack1'){
//                     playerSwordSwing.play()
                    
                    

//                     if (player.anims.currentFrame.index >= 6 && player.anims.currentFrame.index < 8){
                        
//                         sword.body.checkCollision.none = false
//                         damage = 0.1 * maxEnergy * baseDamageMultiplier
//                     } else {
//                         sword.body.checkCollision.none = true
//                     }
//         } else if (player.anims.getName() == 'pAttack2'){
//                     playerSwordSwing.play()
                    
                    

//                     if (player.anims.currentFrame.index >= 2 && player.anims.currentFrame.index < 3){
                        
//                         sword.body.checkCollision.none = false
//                         damage = 0.1 * maxEnergy  * baseDamageMultiplier
//                     } else {
//                         sword.body.checkCollision.none = true
//                     }
//         } else if (player.anims.getName() == 'pHeavyAttack'){
//                     playerHeavySwordSwing.play()

                      
//                     if (player.anims.currentFrame.index >= 4 && player.anims.currentFrame.index < 6){
                        
//                     sword.body.checkCollision.none = false
//                     damage =  0.15 * maxEnergy * baseDamageMultiplier
//                     } else {
//                         sword.body.checkCollision.none = true
//                     }
        
//         }

//         if (nightBorne.anims.getName() == 'nightBorne_Attack'){
//                 enemySwordSwing.play()
                    
//                     if (nightBorne.anims.currentFrame.index >= 10 && nightBorne.anims.currentFrame.index < 12){
                        
//                          nightBorneSword.body.checkCollision.none = false
            
//                     } else {
//                          nightBorneSword.body.checkCollision.none = true
//                     }
//         }


//         if (gameRestart){
//             reset()
//             this.scene.restart()
//             gameRestart = false
//             gameOver = false
//         }

//         refreshStats()


//         if (nightBorne.flipX){
//             nightBorneSword.x = nightBorne.x - 50
//             nightBorneSword.y = nightBorne.y - 125
//         } else {
//             nightBorneSword.x = nightBorne.x + 50
//             nightBorneSword.y = nightBorne.y - 125
//         }

//         nightBorneVitals.x = nightBorne.x + 30
//         nightBorneVitals.y = nightBorne.y - 100
//         nightBorneVitals.draw()

 
//         if (player.flipX){
//             sword.x = player.x - 10
//             sword.y = player.y - 15
//         } else {
//             sword.x = player.x + 10
//             sword.y = player.y - 15
//         }
 

//         chaosFactor = Phaser.Math.FloatBetween(chaosMultiplierMin,chaosMultiplierMax)

//         if (currentLife <= 0 && gameOver == false){
//                 gameOver = true
//                 player.anims.play({key:'pDeath',frameRate: 12},true); 
//                 player.once('animationcomplete', function () {
//                     updateHighScore()
//                     finish();
//                  }, this);
//             } 

        

        

//         }



</script>

</body>
</html>
